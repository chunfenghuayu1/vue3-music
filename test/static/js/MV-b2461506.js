import{_ as e}from"./MvCover-f1471faf.js";import{_ as a}from"./index-3064f07a.js";import{r as t,E as s,ae as l,c as i,a as r,C as o,z as d,S as m,u as p,G as n,a0 as u,V as v,o as c,k as f}from"./common-e50ab5ff.js";import{f as x}from"./format-219ee090.js";import{P as h}from"./player-286ecc7a.js";const y={class:"w-full mt-4"},b={class:"space-y-2"},g={class:"rounded-2xl bg-transparent overflow-hidden max-h-full"},V={class:"flex items-center space-x-8"},j={class:"font-bold text-2xl"},k={class:"flex items-center space-x-8"},q={class:"text-xs text-skin-tertiary"},w={class:"flex items-center text-xs text-skin-tertiary italic"},M={class:"mt-12"},_=r("div",{class:"font-semibold text-lg"},"更多视频",-1),z={class:"grid grid-cols-5 gap-10 lg:gap-x-5 mt-4"},C={__name:"MV",setup(C){const P=v(),{proxy:S}=f(),$=t(null),N=t(null),D=t({}),E=t([]),G=e=>{S.$http.reqMVDetail({mvid:e}).then((({data:a})=>{D.value=a.data;let t=a.data.brs.map((a=>S.$http.reqMVUrl({id:e,r:a.br})));Promise.all(t).then((e=>{let a=e.map((e=>({src:e.data.data.url.replace(/^http:/,"https:"),type:"video/mp4",size:e.data.data.r})));$.value.source={type:"video",title:D.value.name,sources:a,poster:D.value.cover.replace(/^http:/,"https:")}}))})),S.$http.reqMVSimi({mvid:e}).then((({data:e})=>{E.value=e.mvs}))};return s((()=>{$.value=new h(N.value,{settings:["quality","speed"],autoplay:!1,loadSprite:!0,volume:.5,quality:{default:1080,options:[1080,720,480,240]},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]}}),G(P.params.vid)})),l((e=>{e.name===P.name&&G(e.params.vid)})),(t,s)=>{const l=a,v=e;return c(),i("div",y,[r("div",b,[r("div",g,[r("video",{ref_key:"VideoPlayer",ref:N,style:{"--plyr-color-main":"#63bbd0"}},null,512)]),r("div",V,[r("div",j,o(D.value.artistName)+" - "+o(D.value.name),1)]),r("div",k,[r("div",q,o(D.value.publishTime),1),r("div",w,[d(l,{name:"play",size:"18"}),m(o(p(x)(D.value.playCount)),1)])])]),r("div",M,[_,r("div",z,[(c(!0),i(n,null,u(E.value,((e,a)=>{var t;return c(),i("div",{key:a},[d(v,{item:e,"show-title":!0,name:e.name,"img-url":e.cover.replace(/^http:/,"https:"),"sub-text":e.artistName,"show-artist":!0,"artist-id":null==(t=e.artists[0])?void 0:t.id},null,8,["item","name","img-url","sub-text","artist-id"])])})),128))])])])}}};export{C as default};
