import{J as t,a3 as e}from"./common-e50ab5ff.js";import{i as n,g as r}from"./index-3064f07a.js";const o="object"==typeof global&&global&&global.Object===Object&&global;var i="object"==typeof self&&self&&self.Object===Object&&self;const l=o||i||Function("return this")();const c=l.Symbol;var a=Object.prototype,u=a.hasOwnProperty,s=a.toString,f=c?c.toStringTag:void 0;var d=Object.prototype.toString;var v=c?c.toStringTag:void 0;function b(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":v&&v in Object(t)?function(t){var e=u.call(t,f),n=t[f];try{t[f]=void 0;var r=!0}catch(i){}var o=s.call(t);return r&&(e?t[f]=n:delete t[f]),o}(t):function(t){return d.call(t)}(t)}var m=/\s/;var p=/^\s+/;function g(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&m.test(t.charAt(e)););return e}(t)+1).replace(p,""):t}function y(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var h=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,j=/^0o[0-7]+$/i,E=parseInt;function T(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==b(t)}(t))return NaN;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=g(t);var n=w.test(t);return n||j.test(t)?E(t.slice(2),n?2:8):h.test(t)?NaN:+t}const S=function(){return l.Date.now()};var O=Math.max,x=Math.min;function N(t,e,n){var r,o,i,l,c,a,u=0,s=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=r,i=o;return r=o=void 0,u=e,l=t.apply(i,n)}function b(t){return u=t,c=setTimeout(p,e),s?v(t):l}function m(t){var n=t-a;return void 0===a||n>=e||n<0||f&&t-u>=i}function p(){var t=S();if(m(t))return g(t);c=setTimeout(p,function(t){var n=e-(t-a);return f?x(n,i-(t-u)):n}(t))}function g(t){return c=void 0,d&&r?v(t):(r=o=void 0,l)}function h(){var t=S(),n=m(t);if(r=arguments,o=this,a=t,n){if(void 0===c)return b(a);if(f)return clearTimeout(c),c=setTimeout(p,e),v(a)}return void 0===c&&(c=setTimeout(p,e)),l}return e=T(e)||0,y(n)&&(s=!!n.leading,i=(f="maxWait"in n)?O(T(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d),h.cancel=function(){void 0!==c&&clearTimeout(c),u=0,r=a=o=c=void 0},h.flush=function(){return void 0===c?l:g(S())},h}function H(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return y(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),N(t,e,{leading:r,maxWait:e,trailing:o})}const $=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e};class M extends Error{constructor(t){super(t),this.name="ElementPlusError"}}const I=(t,e)=>{if(!n)return!1;const o={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=r(t,o);return["scroll","auto","overlay"].some((t=>i.includes(t)))},L="ElInfiniteScroll",P={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},W=(t,e)=>Object.entries(P).reduce(((n,[r,o])=>{var i,l;const{type:c,default:a}=o,u=t.getAttribute(`infinite-scroll-${r}`);let s=null!=(l=null!=(i=e[u])?i:u)?l:a;return s="false"!==s&&s,s=c(s),n[r]=Number.isNaN(s)?a:s,n}),{}),A=t=>{const{observer:e}=t[L];e&&(e.disconnect(),delete t[L].observer)},B=(t,e)=>{const{container:n,containerEl:r,instance:o,observer:i,lastScrollTop:l}=t[L],{disabled:c,distance:a}=W(t,o),{clientHeight:u,scrollHeight:s,scrollTop:f}=r,d=f-l;if(t[L].lastScrollTop=f,i||c||d<0)return;let v=!1;if(n===t)v=s-(u+f)<=a;else{const{clientTop:e,scrollHeight:n}=t,o=((t,e)=>Math.abs($(t)-$(e)))(t,r);v=f+u>=o+e+n-a}v&&e.call(o)};function D(t,e){const{containerEl:n,instance:r}=t[L],{disabled:o}=W(t,r);o||0===n.clientHeight||(n.scrollHeight<=n.clientHeight?e.call(r):A(t))}const F={async mounted(r,o){const{instance:i,value:l}=o;t(l)||function(t,e){throw new M(`[${t}] ${e}`)}(L,"'v-infinite-scroll' binding value must be a function"),await e();const{delay:c,immediate:a}=W(r,i),u=((t,e)=>{if(!n)return;let r=t;for(;r;){if([window,document,document.documentElement].includes(r))return window;if(I(r,e))return r;r=r.parentNode}return r})(r,!0),s=u===window?document.documentElement:u,f=H(B.bind(null,r,l),c);if(u){if(r[L]={instance:i,container:u,containerEl:s,delay:c,cb:l,onScroll:f,lastScrollTop:s.scrollTop},a){const t=new MutationObserver(H(D.bind(null,r,l),50));r[L].observer=t,t.observe(r,{childList:!0,subtree:!0}),D(r,l)}u.addEventListener("scroll",f)}},unmounted(t){const{container:e,onScroll:n}=t[L];null==e||e.removeEventListener("scroll",n),A(t)},async updated(t){t[L]||await e();const{containerEl:n,cb:r,observer:o}=t[L];n.clientHeight&&o&&D(t,r)},install:t=>{t.directive("InfiniteScroll",F)}},J=F;export{J as E};
