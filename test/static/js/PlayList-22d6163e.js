import{c as e,_ as a}from"./index-3064f07a.js";import{E as s}from"./el-infinite-scroll-8f336740.js";import{_ as t}from"./Modal-0d32c652.js";import{_ as l}from"./PlayListItem-787e39e2.js";import{r as i,j as n,A as r,B as o,c,a as m,C as u,u as d,z as p,t as v,F as f,v as y,ad as x,af as g,V as k,o as b,G as h,a0 as j,k as C}from"./common-e50ab5ff.js";import{b as _}from"./format-219ee090.js";const w={class:"flex space-x-12 mt-8 my-16"},z={class:"flex items-center justify-center flex-shrink-0 relative"},L=["src"],$=["src"],I={class:"flex flex-col justify-center"},P={class:"font-bold text-5xl mb-4"},V={class:""},U={class:"lineClamp1 font-bold"},q=m("span",null,"歌单列表",-1),A=m("span",null," • ",-1),T=["href"],B={class:"lineClamp1 text-skin-tertiary text-sm"},D=m("span",null," • ",-1),E=["textContent"],F={class:"mt-4 flex items-center space-x-8"},G={class:"py-1.5 px-2.5 rounded-lg flex items-center justify-center space-x-1 bg-skin-primary bg-opacity-20 flex-shrink-0"},M=m("span",{class:"font-bold text-skin-primary"},"播放",-1),N={key:0,class:"p-2 rounded-lg flex items-center justify-center bg-gray-400 bg-opacity-10 flex-shrink-0"},H={class:"p-0.5 rounded-lg flex items-center justify-center bg-gray-400 bg-opacity-10 flex-shrink-0"},J={"infinite-scroll-immediate":!1,"infinite-scroll-distance":"100","infinite-scroll-delay":"600"},K={class:"text-sm text-skin-tertiary flex items-center justify-center mt-8 select-none"},O={key:0},Q={class:"overflow-auto text-sm whitespace-pre-wrap"},R={__name:"PlayList",setup(R){const{proxy:S}=C(),W=k(),X=e(),Y=i(!1),Z=()=>{Y.value=!0},ee=i({}),ae=i([]),se=({id:e,limit:a,offset:s})=>{s<1&&S.$http.reqPlayListDetail({id:e}).then((({data:e})=>{ee.value=e.playlist})),S.$http.reqPlayLsitTrankAll({id:e,limit:a,offset:s}).then((({data:e})=>{ae.value=[...ae.value,...e.songs],ie.value=0===e.songs.length}))},te=i(0),le=i(25),ie=i(!1);se({id:W.params.id,limit:le.value,offset:le.value*te.value});const ne=()=>{ie.value||(te.value++,se({id:W.params.id,limit:le.value,offset:le.value*te.value}))},re=n((()=>!X.userList.playlist.some((e=>e.id===Number(W.params.id)))));return(e,i)=>{var n,k;const C=a,R=l,S=t,W=s;return r((b(),c("div",null,[m("div",w,[m("div",z,[m("img",{src:`${ee.value.coverImgUrl}?param=512y512`,class:"rounded-lg h-72 w-72"},null,8,L),m("img",{src:`${ee.value.coverImgUrl}?param=512y512`,class:"h-72 w-72 absolute top-3 -z-10 bg-cover blur-md opacity-60 rounded-lg"},null,8,$)]),m("div",I,[m("h3",P,u(ee.value.name),1),m("div",V,[m("div",U,[q,A,m("a",{target:"_blank",href:`https://music.163.com/#/user/home?id=${null==(n=ee.value.creator)?void 0:n.userId}`,class:"hover:underline"},u(null==(k=ee.value.creator)?void 0:k.nickname),9,T)]),m("div",B,[m("span",null,"最后更新于"+u(d(_)(ee.value.updateTime)),1),D,m("span",null,u(ee.value.trackCount)+"首歌",1)])]),m("div",{class:"my-4 lineClamp3 text-skin-tertiary text-sm cursor-pointer whitespace-pre-wrap",onClick:Z,textContent:u(ee.value.description)},null,8,E),m("div",F,[m("button",G,[p(C,{name:"play",size:"24",class:"text-skin-primary"}),M]),d(re)?(b(),c("button",N,[(b(),v(C,{key:0,name:"dislike",size:"20",class:"text-skin-primary"}))])):f("",!0),m("button",H,[p(C,{name:"more",size:"32",class:"text-skin-primary"})])])])]),r((b(),c("div",J,[p(x,{tag:"div",name:"track-item"},{default:y((()=>[(b(!0),c(h,null,j(ae.value,((e,a)=>(b(),c("div",{key:a,class:"space-y-6"},[p(R,{song:e},null,8,["song"])])))),128))])),_:1})])),[[W,ne]]),m("div",K,[ie.value?(b(),c("div",O,"没有更多数据了......")):f("",!0)]),(b(),v(g,{to:"#main"},[p(S,{modelValue:Y.value,"onUpdate:modelValue":i[0]||(i[0]=e=>Y.value=e),type:"歌单介绍"},{content:y((()=>[m("div",Q,u(ee.value.description),1)])),_:1},8,["modelValue"])]))],512)),[[o,ee.value.name]])}}};export{R as default};
