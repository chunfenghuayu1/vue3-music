import{_ as t}from"./index-3064f07a.js";import{_ as e}from"./MvCover-f1471faf.js";import{_ as s}from"./TrackCover-4800cdfc.js";import{U as l,o as a,c as i,a as r,C as n,F as o,n as m,r as c,a9 as p,j as u,w as d,A as y,B as g,t as v,v as w,z as f,V as x,G as k,a0 as h,k as b}from"./common-e50ab5ff.js";import{_}from"./Cover-c9cf5b69.js";import"./format-219ee090.js";const j={class:"flex justify-between items-end mb-5"},q={class:"text-2xl font-bold"},$={__name:"SearchItem",props:{title:{type:String,required:!0}},setup:t=>(e,s)=>(l("router-link"),a(),i("div",null,[r("div",j,[r("h3",q,n(t.title),1),o("",!0)]),m(e.$slots,"content")]))},C={class:"space-y-8"},S={class:"my-8 flex space-x-8 items-center font-bold text-5xl"},A={class:"flex justify-between space-x-40"},z={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},U={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},B={key:0},D={class:"h-56 lg:w-full flex flex-wrap items-center"},E={key:1},F={class:"grid grid-cols-5 gap-10 lg:gap-x-5"},G={key:2},I={class:"grid grid-cols-6 gap-10 lg:gap-x-5"},M={class:"flex justify-center items-center absolute left-0 bottom-2 pl-1.5 py-0.5"},N={class:"italic text-white text-sm lg:text-xs flex-shrink-0 font-semibold text-opacity-90"},O={__name:"Search",setup(l){const{proxy:m}=b(),j=x(),q=c([{type:100,limit:3,kw:"artists"},{type:10,limit:3,kw:"albums"},{type:1,limit:16,kw:"songs"},{type:1004,limit:5,kw:"mvs"},{type:1e3,limit:12,kw:"playlists"}]),O=c(!1),P=p({artists:[],albums:[],songs:[],mvs:[],playlists:[]}),T=u((()=>q.value.map((t=>m.$http.reqSearch({keywords:j.query.kw,type:t.type,limit:t.limit}))))),V=()=>{j.query.kw&&Promise.all(T.value).then((t=>{q.value.forEach(((e,s)=>{t[s].data.result[e.kw]&&("songs"!==e.kw?P[e.kw]=t[s].data.result[e.kw]:H(t[s].data.result[e.kw],e.kw))}))})).catch((t=>{m.$message({message:t.response.data.message,type:"error"})})).finally((()=>{O.value=!0}))},H=(t,e)=>{const s=t.map((t=>t.id)).join(",");m.$http.reqSongDetail({ids:s}).then((({data:t})=>{P[e]=t.songs}))},J=p({...P});return d((()=>j.query.kw),(()=>{O.value=!1,Object.assign(P,J),V()})),V(),(l,m)=>{const c=_,p=$,u=s,d=e,x=t;return y((a(),i("div",C,[r("div",S,[r("h3",null,n(l.$t.nav.search),1),r("p",null,n(`"${l.$route.query.kw}"`),1)]),r("div",A,[P.artists.length>0?(a(),v(p,{key:0,class:"flex-1",title:"艺人"},{content:w((()=>[r("div",z,[(a(!0),i(k,null,h(P.artists,((t,e)=>(a(),i("div",{key:e},[f(c,{"row-list-item":t,"row-type":"recomArtist"},null,8,["row-list-item"])])))),128))])])),_:1})):o("",!0),P.albums.length>0?(a(),v(p,{key:1,class:"flex-1",title:"专辑"},{content:w((()=>[r("div",U,[(a(!0),i(k,null,h(P.albums,((t,e)=>(a(),i("div",{key:e},[f(c,{"row-list-item":t,"row-type":"newAlbum"},null,8,["row-list-item"])])))),128))])])),_:1})):o("",!0)]),P.songs.length>0?(a(),i("div",B,[f(p,{title:"歌曲"},{content:w((()=>[r("div",D,[(a(!0),i(k,null,h(P.songs,((t,e)=>(a(),i("div",{key:e,class:"w-1/4 h-1/4"},[f(u,{item:t,"pic-url":t.al.picUrl,name:t.name,alia:t.alia,ar:t.ar},null,8,["item","pic-url","name","alia","ar"])])))),128))])])),_:1})])):o("",!0),P.mvs.length>0?(a(),i("div",E,[f(p,{title:"视频"},{content:w((()=>[r("div",F,[(a(!0),i(k,null,h(P.mvs,((t,e)=>(a(),i("div",{key:e},[f(d,{item:t,"show-title":!0,name:t.name,"sub-text":t.artists[0].userName,"img-url":t.cover,"show-artist":!1},null,8,["item","name","sub-text","img-url"])])))),128))])])),_:1})])):o("",!0),P.playlists.length>0?(a(),i("div",G,[f(p,{title:"歌单"},{content:w((()=>[r("div",I,[(a(!0),i(k,null,h(P.playlists,((t,e)=>(a(),i("div",{key:e},[f(c,{"row-list-item":t},{playCount:w((({playCount:t})=>[r("div",M,[f(x,{name:"play",size:"18",class:"opacity-90 text-white"}),r("span",N,n(t),1)])])),_:2},1032,["row-list-item"])])))),128))])])),_:1})])):o("",!0)],512)),[[g,O.value]])}}};export{O as default};
