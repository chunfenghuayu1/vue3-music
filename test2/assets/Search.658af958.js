import{r as I,o as t,c as s,a as l,t as y,u as m,N as L,f as x,G as b,m as E,i as V,L as A,M as F,s as S,w as _,b as u,S as M,F as d,e as h,B as z,_ as G}from"./index.a453b67d.js";import{_ as O}from"./MvCover.0647e92e.js";import{_ as P}from"./TrackCover.fd4edb9b.js";import{_ as R}from"./Cover.28bdc86e.js";import"./format.3c5dc5cf.js";const T={class:"flex justify-between items-end mb-5"},U={class:"text-2xl font-bold"},H={__name:"SearchItem",props:{title:{type:String,required:!0}},setup(w){return(p,g)=>(I("router-link"),t(),s("div",null,[l("div",T,[l("h3",U,y(w.title),1),m("",!0)]),L(p.$slots,"content")]))}},J={class:"space-y-8"},K={class:"my-8 flex space-x-8 items-center font-bold text-5xl"},Q={class:"flex justify-between space-x-40"},W={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},X={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},Y={key:0},Z={class:"h-56 lg:w-full flex flex-wrap items-center"},tt={key:1},et={class:"grid grid-cols-5 gap-10 lg:gap-x-5"},st={key:2},at={class:"grid grid-cols-6 gap-10 lg:gap-x-5"},rt={class:"flex justify-center items-center absolute left-0 bottom-2 pl-1.5 py-0.5"},lt={class:"italic text-white text-sm lg:text-xs flex-shrink-0 font-semibold text-opacity-90"},_t={__name:"Search",setup(w){const{proxy:p}=z(),g=M(),f=x([{type:100,limit:3,kw:"artists"},{type:10,limit:3,kw:"albums"},{type:1,limit:16,kw:"songs"},{type:1004,limit:5,kw:"mvs"},{type:1e3,limit:12,kw:"playlists"}]),v=x(!1),a=b({artists:[],albums:[],songs:[],mvs:[],playlists:[]}),$=E(()=>f.value.map(r=>p.$http.reqSearch({keywords:g.query.kw,type:r.type,limit:r.limit}))),k=()=>{!g.query.kw||Promise.all($.value).then(r=>{f.value.forEach((o,n)=>{if(!!r[n].data.result[o.kw]){if(o.kw==="songs"){C(r[n].data.result[o.kw],o.kw);return}a[o.kw]=r[n].data.result[o.kw]}})}).catch(r=>{p.$notify({title:"Error",message:r.response.data.message,type:"error"})}).finally(()=>{v.value=!0})},C=(r,o)=>{const n=r.map(i=>i.id).join(",");p.$http.reqSongDetail({ids:n}).then(({data:i})=>{a[o]=i.songs})},q=b({...a});return V(()=>g.query.kw,()=>{v.value=!1,Object.assign(a,q),k()}),k(),(r,o)=>{const n=R,i=H,D=P,j=O,B=G;return A((t(),s("div",J,[l("div",K,[l("h3",null,y(r.$t.nav.search),1),l("p",null,y(`"${r.$route.query.kw}"`),1)]),l("div",Q,[a.artists.length>0?(t(),S(i,{key:0,class:"flex-1",title:"\u827A\u4EBA"},{content:_(()=>[l("div",W,[(t(!0),s(d,null,h(a.artists,(e,c)=>(t(),s("div",{key:c},[u(n,{"row-list-item":e,"row-type":"recomArtist"},null,8,["row-list-item"])]))),128))])]),_:1})):m("",!0),a.albums.length>0?(t(),S(i,{key:1,class:"flex-1",title:"\u4E13\u8F91"},{content:_(()=>[l("div",X,[(t(!0),s(d,null,h(a.albums,(e,c)=>(t(),s("div",{key:c},[u(n,{"row-list-item":e,"row-type":"newAlbum"},null,8,["row-list-item"])]))),128))])]),_:1})):m("",!0)]),a.songs.length>0?(t(),s("div",Y,[u(i,{title:"\u6B4C\u66F2"},{content:_(()=>[l("div",Z,[(t(!0),s(d,null,h(a.songs,(e,c)=>(t(),s("div",{key:c,class:"w-1/4 h-1/4"},[u(D,{item:e,"pic-url":e.al.picUrl,name:e.name,alia:e.alia,ar:e.ar},null,8,["item","pic-url","name","alia","ar"])]))),128))])]),_:1})])):m("",!0),a.mvs.length>0?(t(),s("div",tt,[u(i,{title:"\u89C6\u9891"},{content:_(()=>[l("div",et,[(t(!0),s(d,null,h(a.mvs,(e,c)=>(t(),s("div",{key:c},[u(j,{item:e,"show-title":!0,name:e.name,"sub-text":e.artists[0].userName,"img-url":e.cover},null,8,["item","name","sub-text","img-url"])]))),128))])]),_:1})])):m("",!0),a.playlists.length>0?(t(),s("div",st,[u(i,{title:"\u6B4C\u5355"},{content:_(()=>[l("div",at,[(t(!0),s(d,null,h(a.playlists,(e,c)=>(t(),s("div",{key:c},[u(n,{"row-list-item":e},{playCount:_(({playCount:N})=>[l("div",rt,[u(B,{name:"play",size:"18",class:"opacity-90 text-white"}),l("span",lt,y(N),1)])]),_:2},1032,["row-list-item"])]))),128))])]),_:1})])):m("",!0)],512)),[[F,v.value]])}}};export{_t as default};
