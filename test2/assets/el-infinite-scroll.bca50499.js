import{U as t,V as e,W as n,n as r}from"./index.e4314302.js";const o="object"==typeof global&&global&&global.Object===Object&&global;var i="object"==typeof self&&self&&self.Object===Object&&self;const l=o||i||Function("return this")();const c=l.Symbol;var a=Object.prototype,u=a.hasOwnProperty,s=a.toString,f=c?c.toStringTag:void 0;var d=Object.prototype.toString;var v=c?c.toStringTag:void 0;function b(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":v&&v in Object(t)?function(t){var e=u.call(t,f),n=t[f];try{t[f]=void 0;var r=!0}catch(i){}var o=s.call(t);return r&&(e?t[f]=n:delete t[f]),o}(t):function(t){return d.call(t)}(t)}var p=/\s/;var m=/^\s+/;function y(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&p.test(t.charAt(e)););return e}(t)+1).replace(m,""):t}function g(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var h=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,E=/^0o[0-7]+$/i,T=parseInt;function j(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==b(t)}(t))return NaN;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=y(t);var n=w.test(t);return n||E.test(t)?T(t.slice(2),n?2:8):h.test(t)?NaN:+t}const S=function(){return l.Date.now()};var O=Math.max,x=Math.min;function N(t,e,n){var r,o,i,l,c,a,u=0,s=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=r,i=o;return r=o=void 0,u=e,l=t.apply(i,n)}function b(t){return u=t,c=setTimeout(m,e),s?v(t):l}function p(t){var n=t-a;return void 0===a||n>=e||n<0||f&&t-u>=i}function m(){var t=S();if(p(t))return y(t);c=setTimeout(m,function(t){var n=e-(t-a);return f?x(n,i-(t-u)):n}(t))}function y(t){return c=void 0,d&&r?v(t):(r=o=void 0,l)}function h(){var t=S(),n=p(t);if(r=arguments,o=this,a=t,n){if(void 0===c)return b(a);if(f)return clearTimeout(c),c=setTimeout(m,e),v(a)}return void 0===c&&(c=setTimeout(m,e)),l}return e=j(e)||0,g(n)&&(s=!!n.leading,i=(f="maxWait"in n)?O(j(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d),h.cancel=function(){void 0!==c&&clearTimeout(c),u=0,r=a=o=c=void 0},h.flush=function(){return void 0===c?l:y(S())},h}function H(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return g(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),N(t,e,{leading:r,maxWait:e,trailing:o})}const $=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e};class M extends Error{constructor(t){super(t),this.name="ElementPlusError"}}const W=(n,r)=>{if(!t)return!1;const o={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(r)],i=e(n,o);return["scroll","auto","overlay"].some((t=>i.includes(t)))},I="ElInfiniteScroll",L={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},P=(t,e)=>Object.entries(L).reduce(((n,[r,o])=>{var i,l;const{type:c,default:a}=o,u=t.getAttribute(`infinite-scroll-${r}`);let s=null!=(l=null!=(i=e[u])?i:u)?l:a;return s="false"!==s&&s,s=c(s),n[r]=Number.isNaN(s)?a:s,n}),{}),A=t=>{const{observer:e}=t[I];e&&(e.disconnect(),delete t[I].observer)},B=(t,e)=>{const{container:n,containerEl:r,instance:o,observer:i,lastScrollTop:l}=t[I],{disabled:c,distance:a}=P(t,o),{clientHeight:u,scrollHeight:s,scrollTop:f}=r,d=f-l;if(t[I].lastScrollTop=f,i||c||d<0)return;let v=!1;if(n===t)v=s-(u+f)<=a;else{const{clientTop:e,scrollHeight:n}=t,o=((t,e)=>Math.abs($(t)-$(e)))(t,r);v=f+u>=o+e+n-a}v&&e.call(o)};function U(t,e){const{containerEl:n,instance:r}=t[I],{disabled:o}=P(t,r);o||0===n.clientHeight||(n.scrollHeight<=n.clientHeight?e.call(r):A(t))}const D={async mounted(e,o){const{instance:i,value:l}=o;n(l)||function(t,e){throw new M(`[${t}] ${e}`)}(I,"'v-infinite-scroll' binding value must be a function"),await r();const{delay:c,immediate:a}=P(e,i),u=((e,n)=>{if(!t)return;let r=e;for(;r;){if([window,document,document.documentElement].includes(r))return window;if(W(r,n))return r;r=r.parentNode}return r})(e,!0),s=u===window?document.documentElement:u,f=H(B.bind(null,e,l),c);if(u){if(e[I]={instance:i,container:u,containerEl:s,delay:c,cb:l,onScroll:f,lastScrollTop:s.scrollTop},a){const t=new MutationObserver(H(U.bind(null,e,l),50));e[I].observer=t,t.observe(e,{childList:!0,subtree:!0}),U(e,l)}u.addEventListener("scroll",f)}},unmounted(t){const{container:e,onScroll:n}=t[I];null==e||e.removeEventListener("scroll",n),A(t)},async updated(t){t[I]||await r();const{containerEl:e,cb:n,observer:o}=t[I];e.clientHeight&&o&&U(t,n)},install:t=>{t.directive("InfiniteScroll",D)}},F=D;export{F as E};
