import{U as R,V,W as G,n as k}from"./index.3cf213f0.js";var X=typeof global=="object"&&global&&global.Object===Object&&global;const K=X;var Y=typeof self=="object"&&self&&self.Object===Object&&self,q=K||Y||Function("return this")();const W=q;var z=W.Symbol;const h=z;var D=Object.prototype,J=D.hasOwnProperty,Q=D.toString,v=h?h.toStringTag:void 0;function Z(t){var e=J.call(t,v),n=t[v];try{t[v]=void 0;var r=!0}catch{}var i=Q.call(t);return r&&(e?t[v]=n:delete t[v]),i}var tt=Object.prototype,et=tt.toString;function nt(t){return et.call(t)}var rt="[object Null]",it="[object Undefined]",A=h?h.toStringTag:void 0;function ot(t){return t==null?t===void 0?it:rt:A&&A in Object(t)?Z(t):nt(t)}function ct(t){return t!=null&&typeof t=="object"}var lt="[object Symbol]";function at(t){return typeof t=="symbol"||ct(t)&&ot(t)==lt}var st=/\s/;function ft(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var ut=/^\s+/;function dt(t){return t&&t.slice(0,ft(t)+1).replace(ut,"")}function E(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var _=0/0,bt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,mt=/^0o[0-7]+$/i,Tt=parseInt;function H(t){if(typeof t=="number")return t;if(at(t))return _;if(E(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=E(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=dt(t);var n=gt.test(t);return n||mt.test(t)?Tt(t.slice(2),n?2:8):bt.test(t)?_:+t}var yt=function(){return W.Date.now()};const I=yt;var vt="Expected a function",pt=Math.max,St=Math.min;function ht(t,e,n){var r,i,f,l,o,a,s=0,u=!1,b=!1,T=!0;if(typeof t!="function")throw new TypeError(vt);e=H(e)||0,E(n)&&(u=!!n.leading,b="maxWait"in n,f=b?pt(H(n.maxWait)||0,e):f,T="trailing"in n?!!n.trailing:T);function m(c){var g=r,y=i;return r=i=void 0,s=c,l=t.apply(y,g),l}function O(c){return s=c,o=setTimeout(S,e),u?m(c):l}function j(c){var g=c-a,y=c-s,C=e-g;return b?St(C,f-y):C}function p(c){var g=c-a,y=c-s;return a===void 0||g>=e||g<0||b&&y>=f}function S(){var c=I();if(p(c))return L(c);o=setTimeout(S,j(c))}function L(c){return o=void 0,T&&r?m(c):(r=i=void 0,l)}function U(){o!==void 0&&clearTimeout(o),s=0,r=a=i=o=void 0}function B(){return o===void 0?l:L(I())}function w(){var c=I(),g=p(c);if(r=arguments,i=this,a=c,g){if(o===void 0)return O(a);if(b)return clearTimeout(o),o=setTimeout(S,e),m(a)}return o===void 0&&(o=setTimeout(S,e)),l}return w.cancel=U,w.flush=B,w}var Et="Expected a function";function P(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Et);return E(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ht(t,e,{leading:r,maxWait:e,trailing:i})}const F=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},Ot=(t,e)=>Math.abs(F(t)-F(e));class jt extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function wt(t,e){throw new jt(`[${t}] ${e}`)}const It=(t,e)=>{if(!R)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=V(t,n);return["scroll","auto","overlay"].some(i=>r.includes(i))},xt=(t,e)=>{if(!R)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(It(n,e))return n;n=n.parentNode}return n},d="ElInfiniteScroll",$t=50,Nt=200,Lt=0,Ct={delay:{type:Number,default:Nt},distance:{type:Number,default:Lt},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},N=(t,e)=>Object.entries(Ct).reduce((n,[r,i])=>{var f,l;const{type:o,default:a}=i,s=t.getAttribute(`infinite-scroll-${r}`);let u=(l=(f=e[s])!=null?f:s)!=null?l:a;return u=u==="false"?!1:u,u=o(u),n[r]=Number.isNaN(u)?a:u,n},{}),M=t=>{const{observer:e}=t[d];e&&(e.disconnect(),delete t[d].observer)},kt=(t,e)=>{const{container:n,containerEl:r,instance:i,observer:f,lastScrollTop:l}=t[d],{disabled:o,distance:a}=N(t,i),{clientHeight:s,scrollHeight:u,scrollTop:b}=r,T=b-l;if(t[d].lastScrollTop=b,f||o||T<0)return;let m=!1;if(n===t)m=u-(s+b)<=a;else{const{clientTop:O,scrollHeight:j}=t,p=Ot(t,r);m=b+s>=p+O+j-a}m&&e.call(i)};function x(t,e){const{containerEl:n,instance:r}=t[d],{disabled:i}=N(t,r);i||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(r):M(t))}const At={async mounted(t,e){const{instance:n,value:r}=e;G(r)||wt(d,"'v-infinite-scroll' binding value must be a function"),await k();const{delay:i,immediate:f}=N(t,n),l=xt(t,!0),o=l===window?document.documentElement:l,a=P(kt.bind(null,t,r),i);if(!!l){if(t[d]={instance:n,container:l,containerEl:o,delay:i,cb:r,onScroll:a,lastScrollTop:o.scrollTop},f){const s=new MutationObserver(P(x.bind(null,t,r),$t));t[d].observer=s,s.observe(t,{childList:!0,subtree:!0}),x(t,r)}l.addEventListener("scroll",a)}},unmounted(t){const{container:e,onScroll:n}=t[d];e==null||e.removeEventListener("scroll",n),M(t)},async updated(t){t[d]||await k();const{containerEl:e,cb:n,observer:r}=t[d];e.clientHeight&&r&&x(t,n)}},$=At;$.install=t=>{t.directive("InfiniteScroll",$)};const Ht=$;export{Ht as E};
