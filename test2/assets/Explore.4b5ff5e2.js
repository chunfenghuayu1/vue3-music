import{O as e,m as t,P as a,o as s,s as l,w as i,c as r,F as o,e as c,a as n,t as u,A as v,v as p,u as m,T as d,E as y,N as g,Q as f,f as x,R as h,j as w,b as k,L as b,S as q,B as T,_}from"./index.e4314302.js";import{E as M}from"./el-infinite-scroll.bca50499.js";import{_ as j}from"./Cover.8145f599.js";import"./format.3c5dc5cf.js";const C={key:0,class:"space-y-8 p-8 bg-gray-300 bg-opacity-30 rounded-lg text-gray-800 text-opacity-80 origin-top"},L={class:"text-2xl font-bold flex-shrink-0 h-10 flex items-center"},$={class:"flex flex-wrap"},A=["onClick"],E={__name:"TagSelector",props:{showMore:{type:Boolean,required:!0},activeTags:{type:Array,required:!0}},setup(y){const g=e(),f=t((()=>a.explore.categories)),x=e=>a.explore.tags.filter((t=>t.category===1*e));return(e,t)=>(s(),l(d,{name:"tagSelector",mode:"in-out"},{default:i((()=>[y.showMore?(s(),r("div",C,[(s(!0),r(o,null,c(p(f),((e,t)=>(s(),r("div",{key:t,class:"flex space-x-8"},[n("h3",L,u(e),1),n("div",$,[(s(!0),r(o,null,c(x(t),((e,t)=>(s(),r("div",{key:t,class:"flex min-w-24 items-center justify-center"},[n("span",{class:v(["h-10 py-1 px-2.5 flex items-center justify-center rounded-md hover:bg-skin-primary hover:bg-opacity-30 hover:text-skin-primary cursor-pointer",y.activeTags.includes(e.name)?"text-skin-primary":""]),onClick:t=>p(g).storeTags(e)},u(e.name),11,A)])))),128))])])))),128))])):m("",!0)])),_:1}))}},S=["onClick"],B={__name:"ExploreTag",props:{activeTags:{type:Array,required:!0},category:{type:String,required:!0},showMore:{type:Boolean,required:!0}},emits:["update:showMore"],setup(e,{emit:t}){const a=y();return(n,p)=>(s(),l(f,{name:"tagList",class:"flex flex-wrap mb-4 relative",tag:"div"},{default:i((()=>[(s(!0),r(o,null,c(e.activeTags,(l=>(s(),r("div",{key:l,class:v(["selector-tag transition-all",e.category!==l||e.showMore?"":"activeTag"]),onClick:e=>(e=>{a.push({path:"/explore",query:{cat:e}}),t("update:showMore",!1)})(l)},u(l),11,S)))),128)),g(n.$slots,"more")])),_:3}))}},P={key:0},R={class:"font-bold text-6xl my-8"},z={class:"mt-12 grid gap-10 grid-cols-6 lg:gap-x-5","infinite-scroll-immediate":!1,"infinite-scroll-distance":"300","infinite-scroll-delay":"500"},F={class:"absolute right-0 top-2 flex justify-center items-center pr-3 pt-0.5"},H={class:"italic text-white text-sm lg:text-xs flex-shrink-0 font-semibold text-opacity-90"},N={__name:"Explore",setup(a){const l=e(),{proxy:d}=T(),y=q(),g=x(!1),f=t((()=>{const{query:e}=y;return(null==e?void 0:e.cat)||"全部"})),C=x(24),L=x(0),$=x(!0),A=x(null),S=()=>{N.value=[],L.value=0,$.value=!0,A.value=null},N=x([]),O=({limit:e,cat:t,offset:a,before:s})=>{"排行榜"!==t?"精品歌单"!==t?"推荐歌单"!==t?d.$http.reqPlayList({limit:e,cat:t,offset:a}).then((e=>{N.value=[...N.value,...e.data.playlists],$.value=e.data.more})):d.$http.reqAlbumListList({limit:100}).then((e=>{N.value=[...N.value,...e.data.result]})):d.$http.reqHighqualityPlaylist({limit:24,cat:"全部",before:s}).then((e=>{N.value=[...N.value,...e.data.playlists],$.value=e.data.more,A.value=e.data.lasttime})):d.$http.reqRankList().then((e=>{N.value=e.data.list}))},Q=()=>{"排行榜"!==f.value&&"推荐歌单"!==f.value&&$.value&&(L.value++,O({limit:C.value,cat:f.value,offset:L.value*C.value,before:A.value}))};h((e=>{S(),O({limit:C.value,cat:e.query.cat})}));const U=x(!1);return w((()=>{U.value=!0,S(),O({limit:C.value,cat:f.value,offset:L.value*C.value})})),(e,t)=>{const a=B,d=E,y=_,x=j,h=M;return U.value?(s(),r("div",P,[n("h3",R,u(e.$t.explore.title),1),k(a,{showMore:g.value,"onUpdate:showMore":t[1]||(t[1]=e=>g.value=e),"active-tags":p(l).settings.activeTags,category:p(f)},{more:i((()=>[n("div",{class:v(["selector-tag",g.value?"activeTag":""]),onClick:t[0]||(t[0]=e=>g.value=!g.value)}," ••• ",2)])),_:1},8,["showMore","active-tags","category"]),k(d,{"show-more":g.value,"active-tags":p(l).settings.activeTags},null,8,["show-more","active-tags"]),b((s(),r("div",z,[(s(!0),r(o,null,c(N.value,((e,t)=>(s(),r("div",{key:t},[k(x,{"row-list-item":e},{playCount:i((({playCount:e})=>[n("div",F,[k(y,{name:"play",size:"18",class:"opacity-90 text-white"}),n("span",H,u(e),1)])])),_:2},1032,["row-list-item"])])))),128))])),[[h,Q]])])):m("",!0)}}};export{N as default};
