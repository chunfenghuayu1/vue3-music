import{r as t,o as e,c as s,a as l,t as a,u as i,N as r,f as n,G as o,m,i as c,L as p,M as u,s as d,w as y,b as g,S as v,F as w,e as x,B as f,_ as k}from"./index.e4314302.js";import{_ as h}from"./MvCover.4f40a3cc.js";import{_ as b}from"./TrackCover.45ee20fd.js";import{_}from"./Cover.8145f599.js";import"./format.3c5dc5cf.js";const j={class:"flex justify-between items-end mb-5"},q={class:"text-2xl font-bold"},$={__name:"SearchItem",props:{title:{type:String,required:!0}},setup:n=>(o,m)=>(t("router-link"),e(),s("div",null,[l("div",j,[l("h3",q,a(n.title),1),i("",!0)]),r(o.$slots,"content")]))},S={class:"space-y-8"},C={class:"my-8 flex space-x-8 items-center font-bold text-5xl"},A={class:"flex justify-between space-x-40"},E={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},M={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},N={key:0},z={class:"h-56 lg:w-full flex flex-wrap items-center"},B={key:1},D={class:"grid grid-cols-5 gap-10 lg:gap-x-5"},F={key:2},G={class:"grid grid-cols-6 gap-10 lg:gap-x-5"},I={class:"flex justify-center items-center absolute left-0 bottom-2 pl-1.5 py-0.5"},L={class:"italic text-white text-sm lg:text-xs flex-shrink-0 font-semibold text-opacity-90"},O={__name:"Search",setup(t){const{proxy:r}=f(),j=v(),q=n([{type:100,limit:3,kw:"artists"},{type:10,limit:3,kw:"albums"},{type:1,limit:16,kw:"songs"},{type:1004,limit:5,kw:"mvs"},{type:1e3,limit:12,kw:"playlists"}]),O=n(!1),P=o({artists:[],albums:[],songs:[],mvs:[],playlists:[]}),T=m((()=>q.value.map((t=>r.$http.reqSearch({keywords:j.query.kw,type:t.type,limit:t.limit}))))),U=()=>{j.query.kw&&Promise.all(T.value).then((t=>{q.value.forEach(((e,s)=>{t[s].data.result[e.kw]&&("songs"!==e.kw?P[e.kw]=t[s].data.result[e.kw]:H(t[s].data.result[e.kw],e.kw))}))})).catch((t=>{r.$notify({title:"Error",message:t.response.data.message,type:"error"})})).finally((()=>{O.value=!0}))},H=(t,e)=>{const s=t.map((t=>t.id)).join(",");r.$http.reqSongDetail({ids:s}).then((({data:t})=>{P[e]=t.songs}))},J=o({...P});return c((()=>j.query.kw),(()=>{O.value=!1,Object.assign(P,J),U()})),U(),(t,r)=>{const n=_,o=$,m=b,c=h,v=k;return p((e(),s("div",S,[l("div",C,[l("h3",null,a(t.$t.nav.search),1),l("p",null,a(`"${t.$route.query.kw}"`),1)]),l("div",A,[P.artists.length>0?(e(),d(o,{key:0,class:"flex-1",title:"艺人"},{content:y((()=>[l("div",E,[(e(!0),s(w,null,x(P.artists,((t,l)=>(e(),s("div",{key:l},[g(n,{"row-list-item":t,"row-type":"recomArtist"},null,8,["row-list-item"])])))),128))])])),_:1})):i("",!0),P.albums.length>0?(e(),d(o,{key:1,class:"flex-1",title:"专辑"},{content:y((()=>[l("div",M,[(e(!0),s(w,null,x(P.albums,((t,l)=>(e(),s("div",{key:l},[g(n,{"row-list-item":t,"row-type":"newAlbum"},null,8,["row-list-item"])])))),128))])])),_:1})):i("",!0)]),P.songs.length>0?(e(),s("div",N,[g(o,{title:"歌曲"},{content:y((()=>[l("div",z,[(e(!0),s(w,null,x(P.songs,((t,l)=>(e(),s("div",{key:l,class:"w-1/4 h-1/4"},[g(m,{item:t,"pic-url":t.al.picUrl,name:t.name,alia:t.alia,ar:t.ar},null,8,["item","pic-url","name","alia","ar"])])))),128))])])),_:1})])):i("",!0),P.mvs.length>0?(e(),s("div",B,[g(o,{title:"视频"},{content:y((()=>[l("div",D,[(e(!0),s(w,null,x(P.mvs,((t,l)=>(e(),s("div",{key:l},[g(c,{item:t,"show-title":!0,name:t.name,"sub-text":t.artists[0].userName,"img-url":t.cover},null,8,["item","name","sub-text","img-url"])])))),128))])])),_:1})])):i("",!0),P.playlists.length>0?(e(),s("div",F,[g(o,{title:"歌单"},{content:y((()=>[l("div",G,[(e(!0),s(w,null,x(P.playlists,((t,i)=>(e(),s("div",{key:i},[g(n,{"row-list-item":t},{playCount:y((({playCount:t})=>[l("div",I,[g(v,{name:"play",size:"18",class:"opacity-90 text-white"}),l("span",L,a(t),1)])])),_:2},1032,["row-list-item"])])))),128))])])),_:1})])):i("",!0)],512)),[[u,O.value]])}}};export{O as default};
