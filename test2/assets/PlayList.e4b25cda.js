import{X as P,f as o,m as z,L as b,M as N,c as l,a as e,t as i,v as w,b as c,s as C,u as L,w as I,Q as T,Y as E,S as U,o as s,F as q,e as A,B as F,_ as G}from"./index.3cf213f0.js";import{E as Q}from"./el-infinite-scroll.dfc4ff8d.js";import{_ as R}from"./Modal.339c971a.js";import{_ as X}from"./PlayListItem.04e154c9.js";import{b as Y}from"./format.3c5dc5cf.js";const H={class:"flex space-x-12 mt-8 my-16"},J={class:"flex items-center justify-center flex-shrink-0 relative"},K=["src"],O=["src"],W={class:"flex flex-col justify-center"},Z={class:"font-bold text-5xl mb-4"},ee={class:""},te={class:"lineClamp1 font-bold"},se=e("span",null,"\u6B4C\u5355\u5217\u8868",-1),ae=e("span",null," \u2022 ",-1),ne=["href"],oe={class:"lineClamp1 text-skin-tertiary text-sm"},le=e("span",null," \u2022 ",-1),ie=["textContent"],re={class:"mt-4 flex items-center space-x-8"},ce={class:"py-1.5 px-2.5 rounded-lg flex items-center justify-center space-x-1 bg-skin-primary bg-opacity-20 flex-shrink-0"},ue=e("span",{class:"font-bold text-skin-primary"},"\u64AD\u653E",-1),me={key:0,class:"p-2 rounded-lg flex items-center justify-center bg-gray-400 bg-opacity-10 flex-shrink-0"},de={class:"p-0.5 rounded-lg flex items-center justify-center bg-gray-400 bg-opacity-10 flex-shrink-0"},_e={"infinite-scroll-immediate":!1,"infinite-scroll-distance":"100","infinite-scroll-delay":"600"},pe={class:"text-sm text-skin-tertiary flex items-center justify-center mt-8 select-none"},fe={key:0},ve={class:"overflow-auto text-sm whitespace-pre-wrap"},we={__name:"PlayList",setup(he){const{proxy:y}=F(),d=U(),S=P(),_=o(!1),$=()=>{_.value=!0},t=o({}),p=o([]),x=({id:r,limit:m,offset:a})=>{a<1&&y.$http.reqPlayListDetail({id:r}).then(({data:n})=>{t.value=n.playlist}),y.$http.reqPlayLsitTrankAll({id:r,limit:m,offset:a}).then(({data:n})=>{p.value=[...p.value,...n.songs],v.value=n.songs.length===0})},f=o(0),u=o(25),v=o(!1);x({id:d.params.id,limit:u.value,offset:u.value*f.value});const j=()=>{v.value||(f.value++,x({id:d.params.id,limit:u.value,offset:u.value*f.value}))},B=z(()=>!S.userList.playlist.some(r=>r.id===Number(d.params.id)));return(r,m)=>{var g,k;const a=G,n=X,V=R,D=Q;return b((s(),l("div",null,[e("div",H,[e("div",J,[e("img",{src:`${t.value.coverImgUrl}?param=512y512`,class:"rounded-lg h-72 w-72"},null,8,K),e("img",{src:`${t.value.coverImgUrl}?param=512y512`,class:"h-72 w-72 absolute top-3 -z-10 bg-cover blur-md opacity-60 rounded-lg"},null,8,O)]),e("div",W,[e("h3",Z,i(t.value.name),1),e("div",ee,[e("div",te,[se,ae,e("a",{target:"_blank",href:`https://music.163.com/#/user/home?id=${(g=t.value.creator)==null?void 0:g.userId}`,class:"hover:underline"},i((k=t.value.creator)==null?void 0:k.nickname),9,ne)]),e("div",oe,[e("span",null,"\u6700\u540E\u66F4\u65B0\u4E8E"+i(w(Y)(t.value.updateTime)),1),le,e("span",null,i(t.value.trackCount)+"\u9996\u6B4C",1)])]),e("div",{class:"my-4 lineClamp3 text-skin-tertiary text-sm cursor-pointer whitespace-pre-wrap",onClick:$,textContent:i(t.value.description)},null,8,ie),e("div",re,[e("button",ce,[c(a,{name:"play",size:"24",class:"text-skin-primary"}),ue]),w(B)?(s(),l("button",me,[(s(),C(a,{key:0,name:"dislike",size:"20",class:"text-skin-primary"}))])):L("",!0),e("button",de,[c(a,{name:"more",size:"32",class:"text-skin-primary"})])])])]),b((s(),l("div",_e,[c(T,{tag:"div",name:"track-item"},{default:I(()=>[(s(!0),l(q,null,A(p.value,(h,M)=>(s(),l("div",{key:M,class:"space-y-6"},[c(n,{song:h},null,8,["song"])]))),128))]),_:1})])),[[D,j]]),e("div",pe,[v.value?(s(),l("div",fe,"\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86......")):L("",!0)]),(s(),C(E,{to:"#main"},[c(V,{modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=h=>_.value=h),type:"\u6B4C\u5355\u4ECB\u7ECD"},{content:I(()=>[e("div",ve,i(t.value.description),1)]),_:1},8,["modelValue"])]))],512)),[[N,t.value.name]])}}};export{we as default};
