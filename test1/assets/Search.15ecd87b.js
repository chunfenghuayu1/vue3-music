import{r as I,o as t,c as s,a as o,t as y,u as p,N as L,f as x,G as b,m as E,i as V,L as A,M as F,s as S,w as _,b as u,S as M,F as m,e as h,B as U,_ as z}from"./index.5e828b0a.js";import{_ as G,a as O}from"./TrackCover.fb71e5d2.js";import{_ as P}from"./Cover.dee244ef.js";import"./format.3c5dc5cf.js";const R={class:"flex justify-between items-end mb-5"},T={class:"text-2xl font-bold"},H={__name:"SearchItem",props:{title:{type:String,required:!0}},setup(w){return(d,g)=>(I("router-link"),t(),s("div",null,[o("div",R,[o("h3",T,y(w.title),1),p("",!0)]),L(d.$slots,"content")]))}},J={class:"space-y-8"},K={class:"my-8 flex space-x-8 items-center font-bold text-5xl"},Q={class:"flex justify-between space-x-40"},W={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},X={class:"grid grid-cols-3 gap-x-10 lg:gap-x-5"},Y={key:0},Z={class:"h-56 lg:w-full flex flex-wrap items-center"},tt={key:1},et={class:"grid grid-cols-5 gap-10 lg:gap-x-5"},st={key:2},at={class:"grid grid-cols-6 gap-10 lg:gap-x-5"},lt={class:"flex justify-center items-center absolute left-0 bottom-2 pl-1.5 py-0.5"},ot={class:"italic text-white text-sm lg:text-xs flex-shrink-0 font-semibold text-opacity-90"},ut={__name:"Search",setup(w){const{proxy:d}=U(),g=M(),f=x([{type:100,limit:3,kw:"artists"},{type:10,limit:3,kw:"albums"},{type:1,limit:16,kw:"songs"},{type:1014,limit:5,kw:"videos"},{type:1e3,limit:12,kw:"playlists"}]),v=x(!1),a=b({artists:[],albums:[],songs:[],videos:[],playlists:[]}),$=E(()=>f.value.map(l=>d.$http.reqSearch({keywords:g.query.kw,type:l.type,limit:l.limit}))),k=()=>{!g.query.kw||Promise.all($.value).then(l=>{f.value.forEach((r,n)=>{if(!!l[n].data.result[r.kw]){if(r.kw==="songs"){C(l[n].data.result[r.kw],r.kw);return}a[r.kw]=l[n].data.result[r.kw]}})}).catch(l=>{d.$notify({title:"Error",message:l.response.data.message,type:"error"})}).finally(()=>{v.value=!0})},C=(l,r)=>{const n=l.map(i=>i.id).join(",");d.$http.reqSongDetail({ids:n}).then(({data:i})=>{a[r]=i.songs})},q=b({...a});return V(()=>g.query.kw,()=>{v.value=!1,Object.assign(a,q),k()}),k(),(l,r)=>{const n=P,i=H,D=G,j=O,B=z;return A((t(),s("div",J,[o("div",K,[o("h3",null,y(l.$t.nav.search),1),o("p",null,y(`"${l.$route.query.kw}"`),1)]),o("div",Q,[a.artists.length>0?(t(),S(i,{key:0,class:"flex-1",title:"\u827A\u4EBA"},{content:_(()=>[o("div",W,[(t(!0),s(m,null,h(a.artists,(e,c)=>(t(),s("div",{key:c},[u(n,{"row-list-item":e,"row-type":"recomArtist"},null,8,["row-list-item"])]))),128))])]),_:1})):p("",!0),a.albums.length>0?(t(),S(i,{key:1,class:"flex-1",title:"\u4E13\u8F91"},{content:_(()=>[o("div",X,[(t(!0),s(m,null,h(a.albums,(e,c)=>(t(),s("div",{key:c},[u(n,{"row-list-item":e,"row-type":"newAlbum"},null,8,["row-list-item"])]))),128))])]),_:1})):p("",!0)]),a.songs.length>0?(t(),s("div",Y,[u(i,{title:"\u6B4C\u66F2"},{content:_(()=>[o("div",Z,[(t(!0),s(m,null,h(a.songs,(e,c)=>(t(),s("div",{key:c,class:"w-1/4 h-1/4"},[u(D,{item:e,"pic-url":e.al.picUrl,name:e.name,alia:e.alia,ar:e.ar},null,8,["item","pic-url","name","alia","ar"])]))),128))])]),_:1})])):p("",!0),a.videos.length>0?(t(),s("div",tt,[u(i,{title:"\u89C6\u9891"},{content:_(()=>[o("div",et,[(t(!0),s(m,null,h(a.videos,(e,c)=>(t(),s("div",{key:c},[u(j,{item:e,"show-title":!0,name:e.title,"sub-text":e.creator[0].userName,"img-url":e.coverUrl},null,8,["item","name","sub-text","img-url"])]))),128))])]),_:1})])):p("",!0),a.playlists.length>0?(t(),s("div",st,[u(i,{title:"\u6B4C\u5355"},{content:_(()=>[o("div",at,[(t(!0),s(m,null,h(a.playlists,(e,c)=>(t(),s("div",{key:c},[u(n,{"row-list-item":e},{playCount:_(({playCount:N})=>[o("div",lt,[u(B,{name:"play",size:"18",class:"opacity-90 text-white"}),o("span",ot,y(N),1)])]),_:2},1032,["row-list-item"])]))),128))])]),_:1})])):p("",!0)],512)),[[F,v.value]])}}};export{ut as default};
